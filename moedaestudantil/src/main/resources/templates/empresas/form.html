<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${empresa.id == null} ? 'Cadastrar Empresa' : 'Editar Empresa'">Empresa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" th:href="@{/css/empresas-form.css}" href="/css/empresas-form.css">
</head>
<body>
  <div class="header">
    <div class="profile" style="display:flex;align-items:center;gap:10px;">
      <a th:href="@{/ui/empresas}" style="display:flex;align-items:center;text-decoration:none;color:inherit;gap:10px;">
        <div class="profile-icon"><span>&#128188;</span></div>
        <span>Usu√°rio</span>
      </a>
    </div>
    <button class="logout-btn" th:onclick="|window.location='@{/logout}'|" style="margin-right:32px;">Sair</button>
  </div>
  <div class="wrap">
    <h1 th:text="${empresa.id == null} ? 'Cadastrar Empresa' : 'Editar Empresa'">Empresa</h1>
    <form th:action="@{/ui/empresas/salvar}" th:object="${empresa}" method="post" style="margin-top:18px;">
      <input type="hidden" th:field="*{id}" />
      <input type="hidden" th:field="*{versao}" />
      <label>
        <span>CNPJ</span>
        <input type="text" id="cnpj" th:field="*{cnpj}" placeholder="00.000.000/0000-00" required />
      </label>
      <label>
        <span>Nome Fantasia / Raz√£o Social</span>
        <input type="text" th:field="*{nomeFantasia}" placeholder="Minha Empresa LTDA" required />
      </label>
      <label>
        <span>Telefone</span>
        <input type="text" id="telefone" th:field="*{telefone}" placeholder="(00) 00000-0000" />
      </label>
      <label>
        <span>E-mail de contato</span>
        <input type="email" th:field="*{emailContato}" placeholder="contato@empresa.com" />
      </label>
      <label>
        <span>Endere√ßo</span>
        <input type="text" th:field="*{endereco}" placeholder="Rua, n√∫mero, bairro, cidade - UF" />
      </label>
      <div class="actions">
        <button type="submit">Salvar</button>
        <a class="button" th:href="@{/ui/vantagens}">Cancelar</a>
        <a class="button" th:href="@{/ui/vantagens}" style="margin-left:auto;background:#f3f4f6;">Voltar</a>
      </div>
    </form>
  </div>

<!-- ===========================
     üü¶ M√ÅSCARAS (SIMPLIFICADO)
=========================== -->
<script>
  function mascaraCNPJ(value) {
    value = value.replace(/\D/g, "");
    return value
      .replace(/^(\d{2})(\d)/, "$1.$2")
      .replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3")
      .replace(/\.(\d{3})(\d)/, ".$1/$2")
      .replace(/(\d{4})(\d)/, "$1-$2")
      .substring(0, 18);
  }

  function mascaraTelefone(value) {
    value = value.replace(/\D/g, "");
    return value
      .replace(/^(\d{2})(\d)/g, "($1) $2")
      .replace(/(\d{5})(\d)/, "$1-$2")
      .substring(0, 15);
  }

  document.getElementById("cnpj").addEventListener("input", function () {
    this.value = mascaraCNPJ(this.value);
  });

  document.getElementById("telefone").addEventListener("input", function () {
    this.value = mascaraTelefone(this.value);
  });
</script>

</body>
</html>
